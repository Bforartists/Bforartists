import sys
Import ('user_options_dict')
Import ('library_env')

kx_blenderhook_env = library_env.Copy ()

source_files = ['KX_BlenderSystem.cpp',
                'KX_BlenderRenderTools.cpp',
                'KX_BlenderPolyMaterial.cpp',
                'KX_BlenderMouseDevice.cpp',
                'KX_BlenderKeyboardDevice.cpp',
                'KX_BlenderInputDevice.cpp',
                'KX_BlenderGL.cpp',
                'KX_BlenderCanvas.cpp',
                'BL_KetsjiEmbedStart.cpp']

kx_blenderhook_env.Append (CPPPATH=['.',
                                    '#source/kernel/gen_system',
                                    '#intern/string',
                                    '#intern/guardedalloc',
                                    '#source/gameengine/Rasterizer/RAS_OpenGLRasterizer',
                                    '#intern/bmfont',
                                    '#source/gameengine/Converter',
                                    '#source/blender/imbuf',
                                    '#intern/moto/include',
                                    '#source/gameengine/Ketsji',
                                    '#source/blender/blenlib',
                                    '#source/blender/blenkernel',
                                    '#source/blender',
                                    '#source/blender/include',
                                    '#source/blender/makesdna',
                                    '#source/gameengine/Rasterizer',
                                    '#source/gameengine/GameLogic',
                                    '#source/gameengine/Expressions',
                                    '#source/gameengine/Network',
                                    '#source/gameengine/SceneGraph',
                                    '#source/gameengine/Physics/common',
                                    '#source/gameengine/Physics/Sumo',
                                    '#source/gameengine/Physics/Sumo/Fuzzics/include',
                                    '#source/gameengine/Network/LoopBackNetwork',
                                    '#intern/SoundSystem',
                                    '#source/blender/misc',
                                    '#source/blender/blenloader'
                                    ])

kx_blenderhook_env.Append (CPPPATH = user_options_dict['PYTHON_INCLUDE'])
kx_blenderhook_env.Append (CPPPATH = user_options_dict['SOLID_INCLUDE'])

if sys.platform=='win32':
    kx_blenderhook_env.Append (CXXFLAGS = ['/GR'])

kx_blenderhook_env.Library (target='#'+user_options_dict['BUILD_DIR']+'/lib/KX_blenderhook', source=source_files)
