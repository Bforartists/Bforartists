#!/usr/bin/python
Import ('user_options_dict')
Import ('library_env')

blenkernel_env = library_env.Copy ()

source_files = ['intern/constraint.c',
		'intern/depsgraph.c',
                'intern/DerivedMesh.c',
                'intern/group.c',
                'intern/icons.c',
                'intern/material.c',
                'intern/sca.c',
                'intern/world.c',
                'intern/curve.c',
                'intern/mball.c',
                'intern/scene.c',
                'intern/writeavi.c',
                'intern/action.c',
                'intern/deform.c',
                'intern/image.c',
                'intern/mesh.c',
                'intern/modifier.c',
                'intern/screen.c',
                'intern/anim.c',
                'intern/displist.c',
                'intern/ipo.c',
                'intern/nla.c',
                'intern/sound.c',
                'intern/armature.c',
                'intern/effect.c',
                'intern/key.c',
                'intern/object.c',
                'intern/CCGSubSurf.c',
                'intern/subsurf_ccg.c',
                'intern/blender.c',
                'intern/exotic.c',
                'intern/lattice.c',
                'intern/packedFile.c',
                'intern/text.c',
                'intern/script.c',
                'intern/bmfont.c',
                'intern/font.c',
                'intern/library.c',
                'intern/property.c',
                'intern/softbody.c',
		'intern/node.c',
		'intern/node_shaders.c',
                'intern/texture.c']

blenkernel_env.Append (CPPPATH = ['.',
                                  '../blenkernel',
                                  '#/intern/guardedalloc',
                                  '../include',
                                  '../blenlib',
                                  '../makesdna',
                                  '../python',
                                  '../render/extern/include',
                                  '../../../intern/decimation/extern',
                                  '../imbuf',
                                  '../avi',
                                  '#/intern/elbeem/extern',
                                  '#/intern/iksolver/extern',
                                  '../blenloader'])

if user_options_dict['USE_INTERNATIONAL'] == 1:
    blenkernel_env.Append (CPPDEFINES = 'WITH_FREETYPE2')

#fixme: if user_options_dict['USE_CCGSUBSURFLIB'] == 1:
#    blenkernel_env.Append (CPPDEFINES = 'WITH_CCGSUBSURF')

blenkernel_env.Library (target='#'+user_options_dict['BUILD_DIR']+'/lib/blender_blenkernel', source=source_files)

SConscript(['bad_level_call_stubs/SConscript'])

blenkernel_env.Append (CPPPATH = user_options_dict['OPENGL_INCLUDE'])
blenkernel_env.Append (CPPPATH = user_options_dict['Z_INCLUDE'])
blenkernel_env.Append (CPPPATH = user_options_dict['SDL_INCLUDE'])
